const form=document.querySelector("#form"),formInputs=form.querySelectorAll(".form__input"),submitButton=form.querySelector(".form__button"),checkbox=form.querySelector("#agreement"),nameInput=document.getElementById("name"),emailInput=document.getElementById("email"),messageInput=document.getElementById("message");checkbox.addEventListener("change",(()=>{submitButton.disabled=!checkbox.checked}));const NotificationMessages={NAME_REQUIRED:"Имя не может быть пустым.",NAME_WITH_NUMBERS:"Имя может содержать только буквы.",EMAIL_REQUIRED:"Email не может быть пустым.",EMAIL_INVALID:"Некорректный email.",EMPTY_MESSAGE:"Введите сообщение."};function validateName(e){return/^[A-Za-zА-Яа-яЁё\s]+$/.test(e)}function validateEmail(e){return/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/.test(e)}formInputs.forEach((e=>{e.addEventListener("blur",(function(){const t=e.getAttribute("dataType"),n=e.nextElementSibling;switch(t){case"name":this.value.trim().length<1?n.textContent=NotificationMessages.NAME_REQUIRED:validateName(this.value)?n.innerHTML="":n.textContent=NotificationMessages.NAME_WITH_NUMBERS;break;case"email":this.value.trim().length<1?n.textContent=NotificationMessages.EMAIL_REQUIRED:validateEmail(this.value.trim())?n.innerHTML="":n.textContent=NotificationMessages.EMAIL_INVALID;break;case"message":this.value.trim()<1?n.textContent=NotificationMessages.EMPTY_MESSAGE:n.innerHTML=""}}))})),formInputs.forEach((e=>{e.addEventListener("focus",(function(){e.nextElementSibling.textContent=""}))})),form.addEventListener("submit",(e=>{e.preventDefault();const t={name:nameInput.value,email:emailInput.value,message:messageInput.value};fetch("https://jsonplaceholder.typicode.com/posts",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then((e=>{if(!e.ok)throw new Error("Network response was not ok: "+e.statusText);return e.json()})).then((e=>{openModal(`Спасибо ${e.name}!`,"Я свяжусь с вами в ближайшее время")})).catch((e=>{console.error("Ошибка:",e);openModal("Произошла ошибка при отправке формы.")}))}));const modal=document.querySelector(".submitModal");function openModal(e,t){const n=modal.querySelector(".submitModal__title"),o=modal.querySelector(".submitModal__message");n.textContent=e,o.textContent=t||"",modal.classList.toggle("active"),setTimeout((()=>{modal.classList.toggle("active")}),3e3)}